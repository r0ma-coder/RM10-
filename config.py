
# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ TELEGRAM API
# ============================================================================

# Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¾Ð±Ñ‹Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð¾Ñ‚Ð° (Bot API)
BOT_TOKEN = "8457649746:AAFqlHpszZisrBS21VrMeJrknen6PHtNHHk"  # ÐŸÑ€Ð¸Ð¼ÐµÑ€: "6846354234:AAHdjTgksdYUWPsI2s4bCdjTYE"

# Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð´Ð»Ñ User-Ð±Ð¾Ñ‚Ð° (Client API) - Ð¿Ð°Ñ€ÑÐµÑ€Ð°
API_ID = 37780238 # Ð’Ð°Ñˆ api_id Ñ my.telegram.org
API_HASH = 'fbfe8a419fea2f1ee79b9cc32bc49e18' # Ð’Ð°Ñˆ api_hash
PHONE_NUMBER = '+959760950133'  # ÐÐ¾Ð¼ÐµÑ€ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ð° Ð´Ð»Ñ Ð¿Ð°Ñ€ÑÐµÑ€Ð°      

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ ÐŸÐÐ Ð¡Ð•Ð Ð
# ============================================================================

# ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ñ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð°
MAX_USERS_PER_TASK = 300             # ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑŽÐ·ÐµÑ€Ð½ÐµÐ¹Ð¼Ð¾Ð² Ð·Ð° Ð¾Ð´Ð½Ñƒ Ð·Ð°Ð´Ð°Ñ‡Ñƒ
MIN_MESSAGES_FOR_ACTIVE = 2          # ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð°ÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚Ð¸

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ñ€Ð¾Ð¸Ð·Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸
REQUEST_DELAY_SECONDS = 1            # Ð—Ð°Ð´ÐµÑ€Ð¶ÐºÐ° Ð¼ÐµÐ¶Ð´Ñƒ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°Ð¼Ð¸ (Ð´Ð»Ñ Ð¸Ð·Ð±ÐµÐ¶Ð°Ð½Ð¸Ñ Ð±Ð°Ð½Ð°)
MAX_MESSAGES_TO_ANALYZE = 2000       # ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð´Ð»Ñ Ð°Ð½Ð°Ð»Ð¸Ð·Ð°
BATCH_SIZE = 100                     # ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð·Ð° Ð¾Ð´Ð¸Ð½ Ð·Ð°Ð¿Ñ€Ð¾Ñ

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸ Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð²
MAX_PARTICIPANTS_TO_CHECK = 600      # ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² Ð´Ð»Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸
MESSAGES_PER_USER_LIMIT = 50         # Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ Ñƒ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð‘ÐÐ—Ð« Ð”ÐÐÐÐ«Ð¥
# ============================================================================

DATABASE_NAME = "tasks.db"           # Ð˜Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° Ð±Ð°Ð·Ñ‹ Ð´Ð°Ð½Ð½Ñ‹Ñ… SQLite
MAX_TASK_AGE_DAYS = 7                # Ð§ÐµÑ€ÐµÐ· ÑÐºÐ¾Ð»ÑŒÐºÐ¾ Ð´Ð½ÐµÐ¹ ÑƒÐ´Ð°Ð»ÑÑ‚ÑŒ ÑÑ‚Ð°Ñ€Ñ‹Ðµ Ð·Ð°Ð´Ð°Ñ‡Ð¸

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð›ÐžÐ“Ð˜Ð ÐžÐ’ÐÐÐ˜Ð¯
# ============================================================================

# Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL = "INFO"

# ÐšÑƒÐ´Ð° Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸
LOG_TO_FILE = True                   # ÐŸÐ¸ÑÐ°Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ Ð² Ñ„Ð°Ð¹Ð»
LOG_FILENAME = "parser.log"          # Ð˜Ð¼Ñ Ñ„Ð°Ð¹Ð»Ð° Ð»Ð¾Ð³Ð¾Ð²
LOG_TO_CONSOLE = True                # Ð’Ñ‹Ð²Ð¾Ð´Ð¸Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ Ð² ÐºÐ¾Ð½ÑÐ¾Ð»ÑŒ

# Ð¤Ð¾Ñ€Ð¼Ð°Ñ‚ Ð»Ð¾Ð³Ð¾Ð²
LOG_FORMAT = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"
LOG_DATE_FORMAT = "%Y-%m-%d %H:%M:%S"

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð‘ÐžÐ¢Ð
# ============================================================================

# Ð¯Ð·Ñ‹Ðº Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ° Ð±Ð¾Ñ‚Ð°
BOT_LANGUAGE = "ru"                  # ru - Ñ€ÑƒÑÑÐºÐ¸Ð¹, en - Ð°Ð½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹

# ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±Ð¾Ñ‚Ð°
BOT_COMMANDS = {
    "start": "ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ñƒ Ñ Ð±Ð¾Ñ‚Ð¾Ð¼",
    "tasks": "ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¼Ð¾Ð¸ Ð·Ð°Ð´Ð°Ñ‡Ð¸",
    "help": "ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ Ð¿Ð¾ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸ÑŽ Ð±Ð¾Ñ‚Ð°",
    "cancel": "ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰ÐµÐµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ"
}

# Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð±Ð¾Ñ‚Ð° (Ð¼Ð¾Ð¶Ð½Ð¾ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ)
BOT_MESSAGES = {
    "welcome": "ðŸ‘‹ ÐŸÑ€Ð¸Ð²ÐµÑ‚! Ð¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ ÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð°ÐºÑ‚Ð¸Ð²Ð½Ñ‹Ñ… ÑƒÑ‡Ð°ÑÑ‚Ð½Ð¸ÐºÐ¾Ð² Ð¸Ð· Ñ‡Ð°Ñ‚Ð¾Ð².",
    "no_tasks": "ðŸ“­ Ð£ Ð²Ð°Ñ Ð¿Ð¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°Ð´Ð°Ñ‡.",
    "task_created": "âœ… Ð—Ð°Ð´Ð°Ñ‡Ð° #{task_id} ÑÐ¾Ð·Ð´Ð°Ð½Ð°!",
    "parsing_started": "ðŸ”„ ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ Ð½Ð°Ñ‡Ð°Ð»ÑÑ...",
    "parsing_completed": "âœ… ÐŸÐ°Ñ€ÑÐ¸Ð½Ð³ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½! ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ {count} Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹.",
    "error_occurred": "âŒ ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°: {error}"
}

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð‘Ð•Ð—ÐžÐŸÐÐ¡ÐÐžÐ¡Ð¢Ð˜
# ============================================================================

# ÐžÐ³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ð·Ð°Ð´Ð°Ñ‡ Ð² Ð´ÐµÐ½ÑŒ Ð½Ð° Ð¾Ð´Ð½Ð¾Ð³Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
MAX_TASKS_PER_USER_PER_DAY = 10

# Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸ (ÐµÑÐ»Ð¸ Ð¿ÑƒÑÑ‚Ð¾Ð¹ ÑÐ¿Ð¸ÑÐ¾Ðº - Ñ€Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ñ‹ Ð²ÑÐµ)
ALLOWED_USER_IDS = []                # ÐŸÑ€Ð¸Ð¼ÐµÑ€: [123456789, 987654321]

# Ð—Ð°Ð¿Ñ€ÐµÑ‰ÐµÐ½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ð¸
BANNED_USER_IDS = []

# ============================================================================
# ÐÐÐ¡Ð¢Ð ÐžÐ™ÐšÐ˜ Ð¤ÐÐ™Ð›ÐžÐ’ÐžÐ™ Ð¡Ð˜Ð¡Ð¢Ð•ÐœÐ«
# ============================================================================

RESULTS_DIRECTORY = "results"        # ÐŸÐ°Ð¿ÐºÐ° Ð´Ð»Ñ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð²
SESSION_DIRECTORY = "."              # ÐŸÐ°Ð¿ÐºÐ° Ð´Ð»Ñ Ñ„Ð°Ð¹Ð»Ð¾Ð² ÑÐµÑÑÐ¸Ð¹
BACKUP_DIRECTORY = "backups"         # ÐŸÐ°Ð¿ÐºÐ° Ð´Ð»Ñ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ñ… ÐºÐ¾Ð¿Ð¸Ð¹

# ============================================================================
# ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ ÐšÐžÐÐ¤Ð˜Ð“Ð£Ð ÐÐ¦Ð˜Ð˜
# ============================================================================

def validate_config():
    """ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐµÑ‚ ÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾ÑÑ‚ÑŒ ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸"""
    errors = []
    
    if BOT_TOKEN == "Ð’ÐÐ¨_Ð¢ÐžÐšÐ•Ð_Ð‘ÐžÐ¢Ð_Ð—Ð”Ð•Ð¡Ð¬":
        errors.append("BOT_TOKEN Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ñƒ @BotFather")
    
    if API_ID == 12345678:
        errors.append("API_ID Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð½Ð° my.telegram.org")
    
    if API_HASH == "Ð²Ð°Ñˆ_api_hash_Ð·Ð´ÐµÑÑŒ":
        errors.append("API_HASH Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½. ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚Ðµ Ð½Ð° my.telegram.org")
    
    if not PHONE_NUMBER.startswith('+'):
        errors.append("PHONE_NUMBER Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð½Ð°Ñ‡Ð¸Ð½Ð°Ñ‚ÑŒÑÑ Ñ +")
    
    if MAX_USERS_PER_TASK > 500:
        errors.append("MAX_USERS_PER_TASK Ð½Ðµ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð±Ð¾Ð»ÑŒÑˆÐµ 500")
    
    if REQUEST_DELAY_SECONDS < 0.5:
        errors.append("REQUEST_DELAY_SECONDS Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð±Ñ‹Ñ‚ÑŒ Ð½Ðµ Ð¼ÐµÐ½ÐµÐµ 0.5 ÑÐµÐºÑƒÐ½Ð´")
    
    return errors

# ÐÐ²Ñ‚Ð¾Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð¼Ð¿Ð¾Ñ€Ñ‚Ðµ
if __name__ == "__main__":
    validation_errors = validate_config()
    if validation_errors:
        print("âš ï¸ ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð² ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ð¸:")
        for error in validation_errors:
            print(f"  â€¢ {error}")
        print("\nÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, Ð¸ÑÐ¿Ñ€Ð°Ð²ÑŒÑ‚Ðµ config.py Ð¿ÐµÑ€ÐµÐ´ Ð·Ð°Ð¿ÑƒÑÐºÐ¾Ð¼.")
    else:
        print("âœ… ÐšÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐµÐ½Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾!")